# Modelo de Comportamiento del Sistema (DAS)

**Proyecto:** Chatbot Inteligente con Procesamiento Paralelo para Ayudas Universitarias  
**Versión:** 1.0

---

## 1. Operaciones del Sistema

- `RegistrarCliente(phone_number, name)`
- `RecibirMensajeWhatsApp(payloadMeta)`
- `GuardarMensaje(client_id, content, sender_type)`
- `ProcesarConsultaIA(client_id, mensaje)`
- `BuscarRespuestaRAG(consulta_vector)`
- `EnviarRespuestaWhatsApp(response)`
- `EscalarConsulta(client_id, motivo)`
- `ResponderManual(client_id, mensaje)`
- `ActualizarEstadoChatbot(client_id, chatbot_is_active)`
- `GenerarReporteInteracciones(filtro)`
- `GestionarBaseConocimiento(faq_id, operación)`

---

## 2. Objetos con Comportamiento Significativo

- **Cliente (clients):** Nuevo → Activo → ConBot → ConHumano → Inactivo
- **Mensaje (messages):** Recibido → Persistido → ProcesandoIA → RespuestaGenerada → (AutoRespondido | EscalarHumano) → Entregado
- **Consulta (faqs/Qdrant):** Vectorizada → Buscada → Evaluada → Aprobada/NoResuelta
- **Usuario (users):** Inactivo → Autenticado → En Sesión → Cerrado

---

## 3. Diagramas del Sistema

### 3.1 Diagrama de Secuencia – Atención automática con RAG (WhatsApp)

![Diagrama de Secuencia - Atención Automática RAG](https://raw.githubusercontent.com/louisbarrera/ingSoftware2-actividades/refs/heads/main/primerCorte/imagenes/secuencia/seq-auto-rag.png)

**Descripción:** Flujo de atención automática mediante IA y recuperación vectorial (RAG)

---

### 3.2 Diagrama de Secuencia – Escalamiento humano y control del chatbot

![Diagrama de Secuencia - Escalamiento Humano](https://raw.githubusercontent.com/louisbarrera/ingSoftware2-actividades/refs/heads/main/primerCorte/imagenes/secuencia/seq-handoff.png)

**Descripción:** Flujo de interacción humana y desactivación temporal del bot

---

### 3.3 Diagramas de Estados

#### 3.3.1 Estados del Cliente

![Diagrama de Estados - Cliente](https://raw.githubusercontent.com/louisbarrera/ingSoftware2-actividades/refs/heads/main/primerCorte/imagenes/estados/estados-cliente.png)

**Descripción:** Ciclo de vida del cliente dentro del sistema

#### 3.3.2 Estados del Mensaje

![Diagrama de Estados - Mensaje](https://raw.githubusercontent.com/louisbarrera/ingSoftware2-actividades/refs/heads/main/primerCorte/imagenes/estados/estados-mensaje.png)

**Descripción:** Flujo de procesamiento de un mensaje desde su recepción hasta su entrega

#### 3.3.3 Estados de la Consulta del Chatbot

![Diagrama de Estados - Consulta Chatbot](https://raw.githubusercontent.com/louisbarrera/ingSoftware2-actividades/refs/heads/main/primerCorte/imagenes/estados/consulta-chatbot.jpg)

**Descripción:** Estados de una consulta atendida por el chatbot

---

### 3.4 Diagrama de Actividad – Flujo extremo a extremo (E2E)

![Diagrama de Actividad - Flujo E2E](https://raw.githubusercontent.com/louisbarrera/ingSoftware2-actividades/refs/heads/main/primerCorte/imagenes/actividad/actividad-e2e.png)

**Descripción:** Flujo de actividad del proceso completo de atención de consultas

---

### 3.5 Diagrama de Componentes del Sistema

![Diagrama de Componentes del Sistema](https://raw.githubusercontent.com/louisbarrera/ingSoftware2-actividades/refs/heads/main/primerCorte/imagenes/componentes/componentes.png)

**Descripción:** Arquitectura general del chatbot con integración RAG y canales externos

---

## 4. Conflictos Detectados Durante el Análisis

- **Escalamiento automático:** falta de definición de umbrales mínimos de confianza para determinar cuándo activar la intervención humana.
- **Desactivación manual del chatbot:** requiere confirmación y sincronización en tiempo real con la interfaz de usuario.
- **Persistencia de mensajes:** riesgo de duplicidad al recibir múltiples webhooks simultáneos desde Meta.
- **Latencia del RAG:** necesidad de gestionar tiempos máximos de espera para evitar respuestas tardías.
- **Privacidad:** los mensajes deben anonimizarse para métricas o reportes estadísticos.
- **Concurrencia:** manejo de consultas simultáneas mediante colas o workers distribuidos (Spark) para evitar bloqueos.

---

## 5. Técnicas Aplicadas

Se emplearon las siguientes técnicas de modelado:

- **Especificación de operaciones** mediante precondiciones, postcondiciones y manejo de excepciones.
- **Diagramas de traza de eventos** (secuencia) para representar la interacción cliente–backend–IA–administrador.
- **Diagramas de estados y actividad** para mostrar la transición de objetos con comportamiento dinámico (clientes, mensajes, consultas).
- **Diagrama de componentes** para evidenciar la comunicación entre módulos internos y servicios externos.

---

**Autores:** Luis Steven Barrera Rincón – Cristhian Javier Vera Villamizar
